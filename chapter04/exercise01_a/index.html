<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="de">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>Übung 4 - Meshgenerierung - Datenverarbeitung in der Medienproduktion</title>
    <meta name="generator" content="Hugo 0.104.3" />

    
    <meta name="description" content="Online-Material zur Veranstaltung Datenverarbeitung in der Medienproduktion.">
    
    <link rel="canonical" href="https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/chapter04/exercise01_a/">
    

    <meta property="og:url" content="https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/chapter04/exercise01_a/">
    <meta property="og:title" content="Datenverarbeitung in der Medienproduktion">
    <meta property="og:image" content="https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/images/lecture_logo_dvmp.png">
    <meta name="apple-mobile-web-app-title" content="Datenverarbeitung in der Medienproduktion">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/images/lecture_icon.png">
    <link rel="icon" type="image/x-icon" href="https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/images/lecture_icon.png">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/fonts/icon.eot');
        src: url('https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/fonts/icon.eot')
               format('embedded-opentype'),
             url('https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/fonts/icon.woff')
               format('woff'),
             url('https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/fonts/icon.ttf')
               format('truetype'),
             url('https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/stylesheets/application.css">
    <link rel="stylesheet" href="https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/stylesheets/temporary.css">
    <link rel="stylesheet" href="https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <link rel="stylesheet" href="https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/stylesheets/custom.css">
    
    <script src="https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/javascripts/modernizr.js"></script>


    

  </head>
  <body class="palette-primary-teal palette-accent-teal">




<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        Übung 4 - Meshgenerierung
      </div>
    </div>

    

    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion//general" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/images/lecture_logo_dvmp.png">
        </div>
      
      <div class="name">
        <strong>Datenverarbeitung in der Medienproduktion </strong>
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      

      <div class="toc">
        
        <ul>
          




<li>
  
    <span class="section">Allgemeines</span>
    <ul>
      
        
        



<a  title="Kursinfo" href="https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/general/">
	
	Kursinfo
</a>



      
        
        



<a  title="Links &amp; Literatur" href="https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/links/">
	
	Links &amp; Literatur
</a>



      
        
        



<a  title="Python Style Guide" href="https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/python-style-guide/">
	
	Python Style Guide
</a>



      
        
        



<a  title="Vorlesungs Pythonscripts" href="https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/course-python-scripts/">
	
	Vorlesungs Pythonscripts
</a>



      
    </ul>
  
</li>



<li>
  
    <span class="section">Kapitel</span>
    <ul>
      
        
        



<a  title="1. Blender &amp; Scripting-Tools" href="https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/chapter01/exercise01_a/">
	
	1. Blender &amp; Scripting-Tools
</a>



      
        
        



<a  title="2. Python &amp; Blender API" href="https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/chapter02/exercise01_a/">
	
	2. Python &amp; Blender API
</a>



      
        
        



<a  title="3. Operatoren &amp; Addons" href="https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/chapter03/exercise01_a/">
	
	3. Operatoren &amp; Addons
</a>



      
        
        



<a class="current" title="4. Meshgenerierung" href="https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/chapter04/exercise01_a/">
	
	4. Meshgenerierung
</a>


<ul id="scrollspy">
</ul>


      
        
        



<a  title="5. Animation" href="https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/chapter05/exercise01_a/">
	
	5. Animation
</a>



      
        
        



<a  title="6. Assetgenerierung" href="https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/chapter06/exercise01_a/">
	
	6. Assetgenerierung
</a>



      
        
        



<a  title="7. UI" href="https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/chapter07/exercise01_a/">
	
	7. UI
</a>



      
    </ul>
  
</li>


        </ul>
        

        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>Übung 4 - Meshgenerierung </h1>

			<p><strong>Basics der Meshgenerierung und -manipulation</strong></p>
<h2 id="vorbereitung">Vorbereitung</h2>
<blockquote class="todo">
    <p>Aktiviere das vorinstallierte Addon <strong>MeasureIt Tols</strong>. Dieses erlaubt es uns, Indices, Positionen und andere Infos des selektierten Objekts im Viewport anzuzeigen.</p>
<p><video src="./img/measureit.mp4" autoplay loop style="width: 80%;"></video></p>
<p>Nach der Installation sind dessen Optionen in der Sidebar (Shortcut <strong>N →  View → MeasureIt Tools → Mesh Debug</strong>) zu finden. Das Addon selbst muss noch mit <strong>Show</strong> ganz oben im Panel gestartet werden.</p>

</blockquote>
<p>Zu den wichtigsten Aufgaben von Addons gehört die Manipulation und Generierung neuer Meshes. Zur Generierung eines Meshes brauchen Programme dabei grundsätzlich drei Arrays an Daten.</p>
<p><strong>Vertices</strong><br>
Diese bestehen aus je drei <code>floats</code>, die die Position eines Punktes im Raum auf der X, Y und Z Achse angeben.</p>
<p><strong>Faces / Polygone</strong><br>
Diese bestehen je aus einer Liste an integern, die die ID der Vertices im Verticearray angeben, die das Polygon aufspannen. Normalerweise spannen je drei oder vier Vertices ein Polygon auf. In Blender sind jedoch auch N-Gons mit beliebig vielen Vertices möglich. Intern wird für die Grafikkarte alles zu Dreiecken umgerechnet.</p>
<p><strong>Normalen</strong><br>
Bestehen aus je drei <code>floats</code>, die für jeden Vertice den (normalisierten) Richtungsvektor angeben, der orthogonal auf der Oberfläche steht. Diesen braucht die Software z.b. zur Berechnung von Lichteigenschaften des Meshes. Normalen werden manchmal auch pro Polygon angegeben und die Normalen der anliegenden Vertices werden intern generiert. Generell lassen Normalen oft automatisch generieren.</p>
<p><img src="img/meshdata.png" alt="meshdata"></p>
<p>Neben diesen essentiellen Daten gibt es noch weitere, von denen hier noch zwei genannt werden sollen:</p>
<p><strong>Edges</strong><br>
Verbindungen zwischen je zwei Vertixes (anhand deren index). Werden meist nicht extra angegeben, da sie durch die Generierung von Polygonen schon impliziert werden.</p>
<p><strong>Texturkoordinaten (UVs)</strong><br>
Wenn das Mesh texturiert werden soll, werden diese benötigt. UVs geben für jeden Vertice zwei <code>floats</code> an, die beschreiben, wo sich dieser Vertixe auf einer zweidimensionalen Textur befinden soll.</p>
<p>Hierfür bietet uns die Blender API zwei Möglichkeiten.</p>
<ul>
<li>
<p>Die <strong>mesh</strong> Schnittstelle erlaubt uns die schnelle Manipulation von Meshes, indem es uns Zugriff auf dessen einzelne Vertices, Edges und Polygone gibt.</p>
</li>
<li>
<p>Das Modul <strong>bmesh</strong> ist eine weitaus komplexere Bibliothek, die bei komplexeren Mesh-Manipulationen und -Generierungen zum Einsatz kommen sollte.</p>
</li>
</ul>
<h2 id="vertices-hahahugoshortcode-s1-hbhb">Vertices <a href="https://docs.blender.org/api/current/bpy.types.MeshVertex.html#bpy.types.MeshVertex" target="_blank" class="doclink"><img src="https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/images/to_doc.png" title="zur Dokumentation"></a></h2>
<p>Die Vertices  des Meshes werden in dessen Array <code>vertices</code> gespeichert. Jeder Vertex hat eine <code>co</code> (Coordinates) Variable, die einen Vector mit x,y und z Position des Vertex repräsentiert.</p>
<pre><code class="language-python">import bpy

currentmesh = bpy.context.object.data

for vert in currentmesh.vertices:
    vert.co.z += 1

currentmesh.update()
</code></pre>
<p>Um Normalen etc neu zu berechnen, muss das am Ende die <code>update</code> Methode des Meshes aufgerufen werden.</p>
<p>Alleine mit der Manipulation der Vertixpositionen kann schon viel erreicht werden. Hier wurde zum Beispiel einer UV-Sphere ein schraubenartiges Muster gegeben:</p>
<div class="tcl-row">
<div class="tcl-column tcl-left" style="width: 50%"><pre><code class="language-python">import bpy
import math

frequency = 10
amplitude = 0.2

currentmesh = bpy.context.object.data

for vert in currentmesh.vertices:
    vert.co.y += amplitude * math.sin(frequency * vert.co.z)
    vert.co.x += amplitude * math.cos(frequency * vert.co.z)

currentmesh.update()
</code></pre>
</div>
<div class="tcl-column tcl-right" style="width: 50%"><img src="img/screw.png" alt="screw"></div>
</div>
<blockquote class="todo">
    <p>Schreibe ein Script, dass einen unterteilten Würfel nach oben hin um 90° verdreht (siehe Bild).</p>
<p><img src="img/rotate.png" alt="img"></p>
<p><strong>Tipps:</strong></p>
<ul>
<li>
<p>Die Formel für die Rotation eines zweidimensionalen Vectors um den Nullpunkt um den Winkel <em>w</em> ist folgende:<br>
<em>x&rsquo; = x ⋅ cos(w) - y ⋅ sin(w)<br>
y&rsquo; = x ⋅ sin(w) + y ⋅ cos(w)</em></p>
</li>
<li>
<p>Der Drehwinkel muss abhängig von der Höhe ves Vertex sein.</p>
</li>
</ul>

</blockquote>
<ul>
<li>
<p>Zunächst berechnen wir den Winkel in Radianten, in dem jeder Vertex gedreht wird. Dieser soll abhängig von dessen Höhe z sein. Damit wir unten am Würfel mit 0 beginnen, fügen wir z 1 hinzu (denn der Würfel ist 2 Hoch und hat seine Mitte auf Höhe 1) <br>
<code>angle = math.radians((vert.co.z + 1) * 45)</code></p>
</li>
<li>
<p>Nun rotieren wir jeden Vertex auf der Z-Achse um den Nullpunkt. Z bleibt also unverändert. Die obige Formel in Python sieht folgendermaßen aus:<br>
<code>x = vert.co.x * math.cos(angle) - vert.co.y * math.sin(angle)</code><br>
<code>y = vert.co.x * math.sin(angle) + vert.co.y * math.cos(angle)</code></p>
</li>
<li>
<p>letztlich weisen wir die so generierten x und y Werte dem Vertex wieder zu<br>
<code>vert.co.x = x</code><br>
<code>vert.co.y = y</code></p>
</li>
</ul>
<p>Der ganze Code sieht also so aus:</p>
<pre><code class="language-python">import bpy
import math

currentmesh = bpy.context.object.data

for vert in currentmesh.vertices:
    
    angle = math.radians((vert.co.z + 1) * 45)
    
    x = vert.co.x * math.cos(angle) - vert.co.y * math.sin(angle)
    y = vert.co.x * math.sin(angle) + vert.co.y * math.cos(angle)
    
    vert.co.x = x
    vert.co.y = y

currentmesh.update()
</code></pre>
<h2 id="neues-mesh---pflanzen-wachsen-lassen">Neues Mesh - Pflanzen wachsen lassen</h2>
<p>Natürlich können auch komplett neue Meshes generiert werden. Dafür werden wir nun das <code>bmesh</code> Modul <a href="https://docs.blender.org/api/current/bmesh.html" target="_blank" class="doclink"><img src="https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/images/to_doc.png" title="zur Dokumentation"></a> verwenden. In diesem Beispiel werden wir eine Graßpflanze erzeugen.</p>
<ul>
<li>Zunächst müssen wir sowohl das Mesh, als auch das Objekt erzeugen, dem wir das Mesh als <code>data</code> übergeben.</li>
</ul>
<pre><code class="language-python">grassblade_mesh = bpy.data.meshes.new(&quot;grassblade mesh&quot;)
grassblade_object = bpy.data.objects.new(&quot;grassblade&quot;, grassblade_mesh)
</code></pre>
<ul>
<li>Um das Objekt nun der Szene hinzuzufügen, verlinken wir es in der aktuell ausgewählten <em>Collection</em></li>
</ul>
<pre><code class="language-python">grassblade_mesh
</code></pre>
<ul>
<li>Nun kommt das bmesh Modul ins Spiel (importiert es am Anfang der Datei). Wir erzeugen ein neues bmesh anhand des zuvor erstellten Meshes.</li>
</ul>
<pre><code class="language-python">bm = bmesh.new()
bm.from_mesh(grassblade_mesh)
</code></pre>
<p>Neue Vertices und Polygone lassen sich nun folgendermaßen erzeugen:</p>
<pre><code class="language-python">myvert_1 = bm.verts.new((0,0,0)) #Erzeugt Vertex an Position 0 0 0

myface = bm.faces.new((myvert_1, myvert_2, myvert_3, myvert_4)) #Erzeugt ein Polygon zwischen den angegebenen Vertices

# um Vertices anhand deren indices anzugeben, muss zuerst folgende Methode aufgerufen werden.
bm.verts.ensure_lookup_table() 
myface = bm.faces.new((bm.verts[0], bm.verts[1], bm.verts[2], bm.verts[3]))

</code></pre>
<p>Nachdem alle Operationen am Mesh durchgeführt wurden, muss das bmesh wieder zum Mesh konvertiert und anschließend entfernt werden:</p>
<pre><code class="language-python">bm.to_mesh(grassblade_mesh)
bm.free()
</code></pre>
<blockquote class="todo">
    <h2 id="aufgabe-graßhalmstruktur-erzeugen">Aufgabe: Graßhalmstruktur erzeugen</h2>
<div class="tcl-row">
<div class="tcl-column tcl-left" style="width: 70%"><ul>
<li>
<p>Nutzt die oben genannten Möglichkeiten nun, um der Szene ein neues Mesh hinzuzufügen. Dieses soll aus sich nach oben verjüngenden Polygonen bestehen.</p>
</li>
<li>
<p>Anhand der Parameter <code>HEIGHT, MIN_WIDTH und MAX_WIDTH</code> soll das Mesh parametrisierbar sein.</p>
</li>
<li>
<p>Beachtet, dass die Reihenfolge der Vertices eines Faces mit vier Ecken eine wichtige Rolle spielt.</p>
</li>
</ul>
</div>
<div class="tcl-column tcl-right" style="width: 30%"><img src="img/grass1.png" alt="grass1"></div>
</div>
<blockquote class="info">
    <p>Um einen Wert innerhalb von 0 und 1 (oder anderer Beliebiger Werte) auf einen neue Skala zu bringen kann die <em>map range</em> formel verwendet werden.</p>
<p><img src="img/map_range.png" alt="remap"></p>
</blockquote>

</blockquote>
<h3 id="rotation">Rotation</h3>
<p>Um Drehungen von Vertices umzusetzen können wir eine Drehmatrix nutzen. Zur erzeugung dieser können wir das <code>mathutils</code> Modul benutzen. Dabei übergeben wir den Winkel in Radianten, die Größe der Matrix (im 3D Raum 4) und die Achse, um die rotiert werden soll.</p>
<pre><code class="language-python">rot_angle = 45
rotation_matrix = mathutils.Matrix.Rotation(math.radians(rot_angle), 4, 'X') #
</code></pre>
<p>Um die Matrix nun anzuwenden nutzen wir die <code>bmesh.ops.rotate</code> Funktion. Dieser übergeben wir unser bmesh, das Zentrum der Rotation, die Matrix und die Vertices, die rotiert werden sollen.</p>
<pre><code class="language-python">bmesh.ops.rotate(bm, cent=(0, 0, 0), matrix=rotation_matrix, verts=[v1, v2])
</code></pre>
<blockquote class="todo">
    <h2 id="aufgabe-graßhalm-biegen">Aufgabe: Graßhalm biegen</h2>
<div class="tcl-row">
<div class="tcl-column tcl-left" style="width: 70%"><ul>
<li>
<p>Biegt den Graßhalm, indem ihr die Vertices weiter oben stärker rotiert als die unten.</p>
</li>
<li>
<p>Macht dies mit <code>ROT_START</code> (Biegung unten am Halm) und <code>ROT_END</code> (Bieung oben) Parametern einstellbar.</p>
</li>
</ul>
</div>
<div class="tcl-column tcl-right" style="width: 30%"><img src="img/grass2.png" alt="grass1"></div>
</div>
<div class="tcl-row">
<div class="tcl-column tcl-left" style="width: 70%"><ul>
<li>Zusatz: Nutzt die <code>math.pow</code> Funktion (Exponentialfunktion), um die Biegung und die Verjüngung des Halms nach oben natürlcher wirken zu lassen.</li>
</ul>
</div>
<div class="tcl-column tcl-right" style="width: 30%"><img src="img/grass3.png" alt="grass1"></div>
</div>
<h2 id="aufgabe-graßbüschel-addon">Aufgabe: Graßbüschel-Addon</h2>
<div class="tcl-row">
<div class="tcl-column tcl-left" style="width: 70%">Erzeugt schließlich einen ganzen Graßbüschel, indem ihr mehrere Graßhalme mit randomisierten Parametern und rotationen um die Z-Achse erzeut.</div>
<div class="tcl-column tcl-right" style="width: 30%"><img src="img/grass4.png" alt="grass1"></div>
</div>
<ul>
<li>Verpackt das ganze letztendlich in einen Operator mit sinnvollen Parametern und macht das Skript als Addon installierbar.</li>
</ul>

</blockquote>


			<aside class="copyright" role="note">
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/chapter05/exercise01_a/" title="Übung 5 - Animation">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Übung 5 - Animation
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/chapter03/exercise01_a/" title="Übung 3 - Operatoren &amp; Addons">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              Übung 3 - Operatoren &amp; Addons
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = '';
      var repo_id  = '';
    
    </script>

    <script src="https://griestopf.github.io/Datenverarbeitung-in-der-Medienproduktion/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

