<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="de">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>Übung 1 - Blender Setup &amp; Scripting-Tools - Datenverarbeitung in der Medienproduktion</title>
    <meta name="generator" content="Hugo 0.80.0" />

    
    <meta name="description" content="Online-Material zur Veranstaltung Datenverarbeitung in der Medienproduktion.">
    
    <link rel="canonical" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/chapter01/exercise01_a/">
    

    <meta property="og:url" content="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/chapter01/exercise01_a/">
    <meta property="og:title" content="Datenverarbeitung in der Medienproduktion">
    <meta property="og:image" content="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/images/lecture_logo_dvmp.png">
    <meta name="apple-mobile-web-app-title" content="Datenverarbeitung in der Medienproduktion">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/images/lecture_icon.png">
    <link rel="icon" type="image/x-icon" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/images/lecture_icon.png">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/fonts/icon.eot');
        src: url('https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/fonts/icon.eot')
               format('embedded-opentype'),
             url('https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/fonts/icon.woff')
               format('woff'),
             url('https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/fonts/icon.ttf')
               format('truetype'),
             url('https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/stylesheets/application.css">
    <link rel="stylesheet" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/stylesheets/temporary.css">
    <link rel="stylesheet" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <link rel="stylesheet" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/stylesheets/custom.css">
    
    <script src="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-teal palette-accent-teal">




<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        Übung 1 - Blender Setup &amp; Scripting-Tools
      </div>
    </div>

    

    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion//general" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/images/lecture_logo_dvmp.png">
        </div>
      
      <div class="name">
        <strong>Datenverarbeitung in der Medienproduktion </strong>
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      

      <div class="toc">
        
        <ul>
          




<li>
  
    <span class="section">Allgemeines</span>
    <ul>
      
        
        



<a  title="Kursinfo" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/general/">
	
	Kursinfo
</a>



      
        
        



<a  title="Links &amp; Literatur" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/links/">
	
	Links &amp; Literatur
</a>



      
        
        



<a  title="Python Style Guide" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/python-style-guide/">
	
	Python Style Guide
</a>



      
        
        



<a  title="Vorlesungs Pythonscripts" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/course-python-scripts/">
	
	Vorlesungs Pythonscripts
</a>



      
    </ul>
  
</li>



<li>
  
    <span class="section">Kapitel</span>
    <ul>
      
        
        



<a class="current" title="1. Blender &amp; Scripting-Tools" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/chapter01/exercise01_a/">
	
	1. Blender &amp; Scripting-Tools
</a>


<ul id="scrollspy">
</ul>


      
        
        



<a  title="2. Python &amp; Blender API" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/chapter02/exercise01_a/">
	
	2. Python &amp; Blender API
</a>



      
    </ul>
  
</li>


        </ul>
        

        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>Übung 1 - Blender Setup &amp; Scripting-Tools </h1>

			<h2 id="einführung">Einführung</h2>
<h3 id="digitale-medienproduktionen">Digitale Medienproduktionen</h3>
<p>Die meisten Prozesse in digitalen Medienproduktionen werden mit Hilfe hochspezialisierter Softwaretools durchgeführt. 3D-Modelle und Animationen, Post-Produktion, Color-Grading, Greenscreen Keying, Camera-Tracking usw. sind nur effizient mit Hilfe speziell dafür entwickelter Softwarepakete in Produktionen einsetzbar.</p>
<p>Ohne jeglichen Anspruch auf Vollständigkeit hier ein paar Beispiele häufig zum Einsatz kommender Werkzeuge:</p>
<ul>
<li>Maya</li>
<li>Cinema 4D</li>
<li>Houdini</li>
<li>3ds Max</li>
<li>Nuke</li>
<li>Blender</li>
<li>After Effects</li>
<li>DaVinci Resolve</li>
</ul>
<h3 id="effizienz-bei-bewegtbild-produktionen">Effizienz bei Bewegtbild-Produktionen</h3>
<p>Speziell bei Bewegtbild-Medien genügt aber oft nicht die manuelle Bedienung dieser Werkzeuge. Da hier zwischen 24 und 60 Bilder pro Sekunde, bei Stereoproduktionen sogar doppelt so viele, bearbeitet oder generiert werden müssen, ist eine manueller Bild-für-Bild Prozess zu ineffizient.</p>
<p>Eine ausreichende Effizienz lässt sich hier meistens nur mit Hilfe von automatisierten, selbst ablaufenden Prozessen erzielen - also möglichst ohne viel zeitaufwändige und kostenintensive menschliche Interaktion.</p>
<h3 id="automatisierung-durch-skripting">Automatisierung durch Skripting</h3>
<p>Derartige automatisierte Prozesse lassen sich meist nur mit Hilfe von Algorithmen, also durch Programmierung, realisieren. Alle oben genannten Beispiele bieten hierzu eine Programmierschnittstelle an, mit der sich meist sämtliche Funktionen der Software per Code ansprechen lassen. Oftmals ist bereits in die Software ein Code-Editor eingebaut. Damit ist die Programmierung so genannter Skripte oder Makros möglich.</p>
<h3 id="die-rolle-von-python-in-der-medienproduktion">Die Rolle von Python in der Medienproduktion</h3>
<p>In vielen Software-Paketen, die in Medienproduktionen zum Einsatz kommen, wird die Programmiersprache Python verwendet - so können zum Beispiel alle oben genannten Produkte durch Python-Skripte automatisiert werden.</p>
<p>In dieser Veranstaltung soll daher die Verwendung von Python im Umfeld von Medienproduktionen gelehrt werden. Nach einer allgemeinen Einführung in die Programmiersprache wird schnell die Verwendung von Python in der 3D- und Compositing/VFX-Software Blender erarbeitet. Blender wird dazu mit einer eigenen Python-Distribution ausgeliefert und installiert (diese liegt im Blender-Installationsverzeichnis in einem eigenen <code>python</code> Unterverzeichnis). Obwohl der Kern von Blender selbst in den Programmiersprachen C und C++ geschrieben wurde, ist der gesamte Source-Code eng mit Python verzahnt. Nahezu jede Funktionalität, die sich in Blender über das User Interface auslösen lässt, kann auch mit Python-Befehlen aus einem Skript aufgerufen werden. Darüber hinaus ist auf sämtliche Daten innerhalb von Blender über Python-Strukturen zugreifbar. Dazu zählen u.a.</p>
<ul>
<li>Szenen und Objekte</li>
<li>Geometrie</li>
<li>Kamera und Beleuchtung</li>
<li>Materialien</li>
<li>Texturen</li>
</ul>
<h2 id="erste-schritte">Erste Schritte</h2>
<p><strong>In dieser Übung wollen wir uns mit dem Setup von Blender für Scripting, sowie den Tools, die uns von Blender selbst dafür zur Verfügung gestellt werden beschäftigen.</strong></p>
<blockquote class="todo">
    Ladet euch zunächst von <a href="https://www.blender.org/download/">Blender.org</a> die aktuelle Version von Blender herunter.
</blockquote>
<ul>
<li>Dieses Script behandelt die Version 2.91 / 2.92. Zukünftige Versionen könnten eventuell Änderungen an der API vornehmen, normalerweise bleibt die API bei Updates jedoch großteils unverändert.</li>
</ul>
<!--Link zu CG Webseite? Ist ja nicht immer alles Online und vlt auch nicht immer auf Davids Webspace?-->
<ul>
<li>Eine Einführung in Blender selbst, sowie Links mit Tutorials etc. gibt es im <a href="https://sftp.hs-furtwangen.de/~lochmann/computergrafik2019/script/chapter01/lecture01/"><strong>Script zur Veranstalltung Computergrafik</strong></a></li>
</ul>
<blockquote class="todo">
    <ul>
<li>Öffnet Blender und in Blender die <em><strong>Preferences</strong></em>
<img src="img/preferences.png" alt="Preferences"></li>
<li>Aktiviert hier nun im <em><strong>Interface</strong></em> Tab <em><strong>Python Tooltips</strong></em> und <em><strong>Development Extras</strong></em></li>
</ul>

</blockquote>
<br>
<div class="tcl-row">
<div class="tcl-column tcl-left" style="width: 50%"><strong>Python Tooltips</strong> zeigt nun beim Hovern mit dem Cursor über einen Wert dessen Pfad in der Blender API an.</div>
<div class="tcl-column tcl-right" style="width: 50%"><img src="img/python_tooltip.png" alt="Python Tooltip"></div>
</div>
<div class="tcl-row">
<div class="tcl-column tcl-left" style="width: 50%"><strong>Development Extras</strong> Ermöglicht einige Funktionen, die uns das Scripten erleichter, wie z.b. das Anzeigen des Python-Codes von Features (<code>RMB</code> → <em>Edit Source</em>). Der Sourcecode wird dann im Texteditor geöffnet. Da manche Bereiche der UI automatisch über den <a href="https://github.com/blender/blender/tree/master/source/blender">C-Kern</a> von Blender generiert werden, gibt es jedoch nicht zu jedem Wert und Knopf ein Pythonscript.</div>
 <div class="tcl-column tcl-right" style="width: 50%"><img src="img/edit_source.png" alt="Edit Source"></div>
</div>
<h2 id="scripting-tools">Scripting Tools</h2>
<p><blockquote class="todo">
    Wechselt nun zum Workspace-Tab <em><strong>Scripting</strong></em>
</blockquote>
<img src="img/scripting_workspace.png" alt="Scripting Workspace"> <!--TODO Bild Counter einfügen--></p>
<ul>
<li>Der <strong><span style="color: ForestGreen">3D View</span></strong> <span class="counter">1</span> stellt die aktuelle Szene in 3D dar.</li>
<li>Mit der <strong><span style="color: DarkGoldenRod">Python Konsole</span></strong>  <span class="counter">2</span> kann wie mit dem <code>python</code>-Befehl von der Kommandozeile des Betriebssystems interaktiv Python-Code Zeile für Zeile eingegeben werden.</li>
<li>Das <strong><span style="color: Blue">Info Fenster</span></strong>  <span class="counter">3</span> gibt den Code von in Blender ausgeführten Aktionen aus</li>
<li>Im <strong><span style="color: Red">Text Editor</span></strong>  <span class="counter">4</span> wird der Code für unsere Scripte geschrieben</li>
<li>Die beiden <strong><span style="color: DarkOrange">Outliner Fenster</span></strong>  <span class="counter">5</span> zeigen oben die aktuelle Szenen-Hierarchie und unten alle Daten des geöffneten Blender Files</li>
<li>Der <strong><span style="color: Magenta">Properties Editor</span></strong>  <span class="counter">6</span> ermöglicht die Bearbeitung von Werten des aktuellen Objekts, sowie Einstellungen der Szene.</li>
</ul>
<p>Ein weiteres wichtiges Werkzeug ist die <strong>Systemkonsole</strong>.
<blockquote class="todo">
    <ul>
<li>
<p>Wenn Windows benutzt wird, wählt <strong>Window → Toggle System Console</strong></p>
</li>
<li>
<p>In Linux und Mac muss Blender über das Terminal gestartet werden und dieses Terminal erfüllt dann deren Zweck:</p>
<ul>
<li>
<p><strong>Linux:</strong> Wenn Blender über die Packetverwaltung installiert wurde <em>(was übrigens nicht empfehlenswert ist, da diese Versionen meist veraltet sind, keinen CUDA support haben etc.)</em> einfach in die Konsole <code>blender</code> eingeben. Wenn Blender von der Webseite heruntergeladen und extrahiert wurde, muss der ganze Pfad zur Blender executable angegeben werden - z.b. <code>/home/software/blender-2.91.2-linux64/blender</code></p>
</li>
<li>
<p><strong>MacOS:</strong> Im Terminal den Pfad zur Blender installation angeben - z.b. <code>&quot;/Applications/Blender/blender.app/Contents/MacOS/blender</code>
<img src="img/console.png" alt="Scripting Workspace"> <!--TODO Bild Counter einfügen--></p>
</li>
</ul>
</li>
</ul>

</blockquote></p>
<p>Nach dem Start von Blender zeigt uns die Systemkonsole die mitgelieferte Python-Installation an. Hier werden auch Fehlermeldungen und Ausgaben des <code>print()</code> Befehls ausgegeben.</p>
<h2 id="live-scripting">Live Scripting</h2>
<!--Zwei-Spalten layout in "Markdown" WOW! Funktioniert nur ohne Einrückung-->
<div class="tcl-row">

<div class="tcl-column tcl-left" style="width: 50%"><p>Die <strong>Python Konsole</strong> ermöglicht Live Scripting. Auch Auto Vervollständigung ist möglich. So kann beispielsweise bpy. (<strong>b</strong>lender <strong>py</strong>thon API) getippt werden und anschließend mit <code>TAB</code> die verfügbaren nachfolgenden Pfade angezeigt werden. Mit <code>Pfeil nach oben</code> kann der letzte Befehl wieder aufgerufen werden.</p>
<p>Mit folgendem Befehl können wir z.b. das selektierte Objekts um zwei Einheiten entlang der Y-Achse verschieben.</p>
<pre><code class="language-n">bpy.ops.transform.translate(value=(0, 2, 0))
</code></pre>
<p>Pfade können auch in Variablen gespeichert und dann über diese manipulert werden:</p>
<pre><code class="language-n">my_cube = bpy.context.object
</code></pre>
<pre><code class="language-n">my_cube.location.x += 2
</code></pre>
<p>wird lediglich der Pfad zu einer Variablen oa. eingegeben, gibt die Konsole deren Wert zurück. Z.b. <code>my_cube.scale</code> gibt <code>Vector((1.0, 1.0, 1.0))</code> zurück. Wir wissen also nun, dass es sich bei scale um eine Datenstruktur &ldquo;Vector&rdquo; handelt und diese die Werte (1,1,1) für x, y und z hat.</p>
<p>Die Struktur der API wird im folgenden Kapitel noch genauer behandelt.</p>
</div>

<div class="tcl-column tcl-right" style="width: 50%"><video autoplay controls loop src="img/live_console.mp4"></video></div>

</div>
<p>Was fällt uns hier ins Auge?:</p>
<ul>
<li>
<p>Alles, was Blender für das Skripten zur Verfügung stellt, ist über das Python-<em>Modul</em> <code>bpy</code> abrufbar. Unterhalb von <code>bpy</code> gibt es eine weitere hierarchische Aufteilung, so dass Blender-Kommandos in Python folgende Struktur haben:</p>
<pre><code>bpy.abc.def.[...].command()
</code></pre>
<p>Das Kommando <code>bpy.ops.transform.translate()</code> verwendet aus der Gesamtheit aller Blender-Python-Funktionalität <code>bpy</code> die Untergruppe der Operatoren <code>ops</code>, dort wird dann aus der Untergruppe der Transformations-Operatoren <code>transform</code> die Methode <code>translate</code> aufgerufen.</p>
</li>
<li>
<p>Funktionen (Methoden), die Parameter entgegen nehmen, verwenden meist <em>named</em> Paramter. Im Beispiel oben muss daher der Verschiebungsvektor, der an die Methode <code>translate</code> übergeben wird, mit <code>value=...</code> explizit benannt werden. Bislang haben wir bei Python-Methoden die aus anderen Programmiersprachen bekannten <em>positional</em> Parameter kennen gelernt, bei denen die Position in der Parameterliste eindeutig bestimmt, welcher Parameter gemeint ist.</p>
</li>
<li>
<p>Vektoren werden in  einer 3D-Anwendung an allen möglichen Stellen verwendet. So auch in Blender, z.B. für die Angaben von Verschiebungen, Positionen, Normalen, Euler-Winkel, Textur-Koordinaten usw.. Diese können in Blender Python als <em>Tupel</em> (Siehe Lektion 2 - Datentypen) angegeben werden.</p>
</li>
</ul>
<h2 id="abläufe-als-script-speichern">Abläufe als Script speichern</h2>
<p>Das Info Fenster gibt uns für die meisten Aktionen, die wir in Blender tun den Python-Code aus, der im Hintergrund ausgeführt wird. So können wir schnell Arbeitsabläufe einfach aus dem Info Fenster herauskopieren und als Script abspeichern, um uns repetetive Arbeit zu sparen.</p>
<p><img src="img/info.png" alt="Info Fenster">
Das Info Fenster nachdem ein Affenkopf hinzugefügt, diesem ein Subdivisio Surface Modifier hinzugefügt und er auf der Z-Achse um 2.0 skaliert wurde</p>
<blockquote class="todo">
    <ul>
<li>
<p>Der Inhalt des Info-Fensters kann mit <code>LMB + Drag</code> selektiert werden und mit <code>STRG + C</code> &amp; <code>STRG + V</code> in das Textfenster kopiert werden (vorher dort oben auf <em><strong>New</strong></em> klicken).</p>
</li>
<li>
<p>Damit unser Script funktioniert muss hier noch das <strong>bpy Modul</strong> importiert werden (in der Echtzeit-Konsole geschieht dies automatisch).</p>
</li>
<li>
<p>Das Script kann mit Klick auf den Play-Button oben im Texteditor oder mit dem Shortcut <code>ALT + P</code> (mit Mauscursor im Texteditor) ausgeführt werden.</p>
</li>
</ul>
<p><img src="img/automated.png" alt="Automatisierung von Abläufen"></p>

</blockquote>
<p>Die meisten Optionen der Operatoren haben Standardwerte und können weggelassen werden, wenn sie nicht benötigt werden. Es reicht daher für diesen Zweck auf folgender Code:</p>
<pre><code class="language-python">import bpy
bpy.ops.mesh.primitive_monkey_add()
bpy.ops.object.modifier_add(type='SUBSURF')
bpy.ops.transform.resize(value=(2, 1, 1)) 
# (2, 1, 1) steht hierbei für 2 auf X- und 1 Y- und Z-Achse. 
# Die Default-Skalierung ist (1,1,1)
</code></pre>
<blockquote class="info">
    in Python können Funktionsparameter (hier z.b. der <em>value</em> Vektor der resize Funktion) entweder in deren Reihenfolge ohne Bezeichner, oder mit Bezeichner in beliebiger Reihenfolge aufgerufen werden. Letzeres ist zu bevorzugen wenn die Parameter nicht offensichtlich sind, um den Code gut lesbar zu halten.
</blockquote>
<p>Wir können unseren Code natürlich auch in eine Funktion packen und diese später im Code aufrufen.</p>
<pre><code class="language-python">import bpy

def add_smooth_wide_monkey(wideness):
    bpy.ops.mesh.primitive_monkey_add()
    bpy.ops.object.modifier_add(type='SUBSURF')
    bpy.ops.transform.resize(value=(wideness, 1, 1))

add_smooth_wide_monkey(2)
</code></pre>
<p><strong>ACHTUNG:</strong> Anders als in den meisten kompilierten Sprachen, müssen Funktionen in Python immer schon VOR deren Aufruf definiert werden.</p>
<p>Bei Fehlern im Code kann uns die Systemkonsole nützlich werden. Wenn beispielsweise hier ein Schreibfehler im Variablenaufruf in Zeile 6 passiert, teilt uns das die Systemkonsole folgendermaßen mit:</p>
<p style="margin-bottom: -30px; margin-left: 5px;"> <img style="margin-bottom: -3px;" height="20px" src="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/images/blender_icon.png" alt=""> blender.exe</p>
<pre class="console" style="width: ;">
Traceback (most recent call last):
  File "/Text", line 8, in <module>
  File "/Text", line 6, in add_smooth_wide_monkey
NameError: name 'wiseness' is not defined
Error: Python script failed, check the message in the system console
</pre>
<p>Da dementsprechend auch der Aufruf der kaputten Funktion nicht funktioniert, wird auch in Zeile 8 ein Fehler angezeigt.</p>
<h2 id="affentheater">Affentheater</h2>
<p>Wir wollen nun das Erlernte anwenden, um eine Horde von unterschiedlich gefärbten und skalierten Affenköpfen (im Rechteck angeordnet) zu erstellen.</p>
<p><img src="img/affentheater.png" alt="Affentheater"></p>
<blockquote class="todo">
    <ul>
<li>Erstellt im Text Editor ein neues Script</li>
<li>importiert zunächst die Blender API mit <code>import bpy</code></li>
<li>Um ein Gitter zu erzeugen benötigen wir zwei verschachtelte Schleifen (Zeilen und Spalten). Solche For-Schleifen in Python sind sehr einfach mit der <strong>range</strong> funktion möglich. Wird in dieser nur eine Zahl angegeben, entspricht diese der Anzahl an ausgeführten Iterationen.</li>
</ul>
<pre><code class="language-python">for row in range(5):
    for column in range(5):
        #...Code um Affengitter mit 5 Reihen und Spalten zu erzeugen
</code></pre>
<ul>
<li>
<p>Fügt nun den Code der Operatoren, den ihr aus dem Info Fenster kopieren könnt, in die geschachtelte Schleife ein. Wir wollen mit jeder Iteration:</p>
<ul>
<li>Einen Affen (Suzanne) an seinem Platz im Gitter hinzufügen</li>
<li>Den Affen rotieren, damit er hübscher guckt</li>
<li>Das Shading des Meshes auf <em>Smooth</em> setzen</li>
</ul>
</li>
<li>
<p>Entfernt nun die nicht benötigten Parameter aus den Operatorfunktionen</p>
</li>
</ul>

</blockquote>
<p>Das Affengitter-Script sollte nun in etwa so aussehen:</p>
<pre><code class="language-python">import bpy

for row in range(5):
    for column in range(5):
        bpy.ops.mesh.primitive_monkey_add(location=(3 * row ,3 * column, 0))
        bpy.ops.transform.rotate(value=-0.6, orient_axis='X', orient_type='GLOBAL')
        bpy.ops.object.shade_smooth()
</code></pre>
<p>Schließlich wollen wir die Verwendung von Magic Numbers (undokumentierte Zahlen irgendwo im Code) reduzieren.</p>
<blockquote class="todo">
    <ul>
<li>Dazu legen wir oben im Script die entsprechenden &ldquo;Konstanten&rdquo; an (speziell deklarierte Konstanten gibt es in Python nicht) und setzen sie unten im Code ein.</li>
<li>Hier importieren wir noch das <strong>random</strong> modul und verwenden deren <strong>uniform</strong> Funktion, um jedem Affen eine zufällige Größe zu geben. Diese gibt einen zufälligen Wert innerhalb der Beiden übergebenen Parameter zurück.</li>
</ul>
<pre><code class="language-python">import bpy
import random

GRID_SPACING = 3
GRID_SIZE = 5
SIZE_MIN = 0.2
SIZE_MAX = 1.2

for row in range(GRID_SIZE):
    for column in range(GRID_SIZE):
        bpy.ops.mesh.primitive_monkey_add(location=(GRID_SPACING * row ,GRID_SPACING * column, 0))
        bpy.ops.transform.rotate(value=-0.6, orient_axis='X', orient_type='GLOBAL')
        bpy.ops.object.shade_smooth()
        
        # random size
        size_x = random.uniform(SIZE_MIN, SIZE_MAX)
        size_y = random.uniform(SIZE_MIN, SIZE_MAX)
        size_z = random.uniform(SIZE_MIN, SIZE_MAX)
        bpy.ops.transform.resize(value=(size_x, size_y, size_z))
</code></pre>
<p><em>Der Affentheater Code bis hierhin</em></p>
<blockquote class="info">
    <p>Um die Szene vor jeder Ausführung des Scripts zu leeren, kann folgender Code an den Anfang des Scripts (unter imports) gesetzt werden.</p>
<pre><code class="language-python">bpy.ops.object.select_all(action='SELECT') # selektiert alle Objekte
bpy.ops.object.delete(use_global=False, confirm=False) # löscht selektierte objekte
bpy.ops.outliner.orphans_purge() # löscht überbleibende Meshdaten etc.
</code></pre>
</blockquote>

</blockquote>
<h3 id="farbe">Farbe</h3>
<p>Nun wollen wir jedem Kopf eine eigene Farbe geben. Mit dem Scripting von richtigen Materialien werden wir uns in einer späteren Übung auseinandersetzen. Für dieses Beispiel werden lediglich die <code>color</code> Variable jedes Objektes im Loop setzen, der für sich alleine stehend noch keinen Einfluss auf das Ergebnis beim Rendering hat. Im UI ist dieser Wert im <strong>Properties Editor → Object → Viewport Display</strong> zu finden.</p>
<p><img src="img/objectcolor.png" alt="objectcolor"></p>
<p>Wir können ihn uns auf Objekten jedoch anzeigen lassen, indem wir im im <strong>Shading Menü → Color</strong> auf <strong>Object</strong> stellen.</p>
<p><img src="img/viewport_settings_objectcolor.png" alt="viewport_objectcolor"></p>
<blockquote class="todo">
    <ul>
<li>Stellt wie oben gezeigt das Viewport Shading auf <strong>Object</strong></li>
<li>Legt in der for-Schleife nun einen Wert an, der eine zufällige Farbe generiert und dem aktiven Objekt zuweist</li>
</ul>
<pre><code class="language-python">object_color = (
    random.uniform(0, 1),
    random.uniform(0, 1),
    random.uniform(0, 1),
    1 # Alpha-Wert der Farbe (Intransparenz) - soll hier immer 1 sein
)

bpy.context.object.color = object_color
</code></pre>

</blockquote>
<blockquote class="todo">
    <h2 id="aufgabe-bis-zum-nächsten-mal">Aufgabe bis zum nächsten Mal</h2>
<ul>
<li>Schreibt ein Script, welches eine Horde (5 oder mehr) von Affen in der Szene platziert und im Kreis anordnet</li>
<li>Lasst die Affenköpfe alle in die Mitte der Szene gucken</li>
<li><strong>Freiwillig:</strong> Verbessert den Farbzuweisungs-Code, um den Affen natürlichere Farben zuzuweisen. Seht euch dazu <code>mathutils.color</code> <a href="https://docs.blender.org/api/current/mathutils.html#mathutils.Color" target="_blank" class="doclink"><img src="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/images/to_doc.png" title="zur Dokumentation"></a> an.</li>
</ul>
<p><img src="img/affenkreis.png" alt="img"></p>
<ul>
<li>Experimentiert auch gerne mit weiteren Funkionen</li>
</ul>
<h3 id="tipps">Tipps</h3>
<ul>
<li>Die Formel für die Position eines Punktes im Einheitskreis ist Folgende:<br>
<img src="img/einheitskreis.png" alt="img"><br></li>
<li><strong>t</strong> ist dabei der Winkel in Radianten. 360° entspricht 2Pi.</li>
<li>Zur Nutzung von Sinus &amp; Cosinus muss das math Modul importiert werden</li>
</ul>
<pre><code class="language-python"> import math
</code></pre>

</blockquote>
<h2 id="ressourcen--tutorials-zum-thema">Ressourcen &amp; Tutorials zum Thema</h2>
<table>
<thead>
<tr>
<th>Art/Länge</th>
<th>Titel</th>
<th>Beschreibung</th>
<th>Quelle</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/general/icons/video.png" class="resicon">  44min</td>
<td><a href="https://youtu.be/XqX5wh4YeRw">Python Crashcourse for Blender</a></td>
<td>Guter Schnelleinstieg in Scripting mit Blender</td>
<td><a href="https://www.youtube.com/channel/UCzghqpGuEmk4YdVewxA79GA">YouTube -  Curtis Holt</a></td>
</tr>
<tr>
<td><img src="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/general/icons/article.png" class="resicon"></td>
<td><a href="https://docs.blender.org/api/current/info_quickstart.html">Blender Python API Dokumentation</a></td>
<td>Offizielle Blender API Dokumentation</td>
<td><a href="https://docs.blender.org/api/current/index.html">Blender Python API Dokumentation</a></td>
</tr>
<tr>
<td><img src="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/general/icons/playlist.png" class="resicon"> 21x je 5-20min</td>
<td><a href="https://www.youtube.com/playlist?list=PLFtLHTf5bnym_wk4DcYIMq1DkjqB7kDb-">Blender Python - Scripting Series</a></td>
<td>Ausführlichere Serie zu Blender Scripting</td>
<td><a href="https://www.youtube.com/c/DarkfallBlender">YouTube - Darkfall</a></td>
</tr>
<tr>
<td><img src="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/general/icons/playlist.png" class="resicon"> 15x je 5-20min</td>
<td><a href="https://cloud.blender.org/p/scripting-for-artists/">Scripting for Artists</a></td>
<td>Sehr gute aufgearbeitete Serie zu Blender Scripting und Addon Entwicklung - teilweise jedoch kostenpflichtig</td>
<td><a href="https://cloud.blender.org/welcome">Blender Cloud</a> - <a href="https://stuvel.eu/">Dr. Sybren A. Stüvel</a></td>
</tr>
<tr>
<td><img src="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/general/icons/article.png" class="resicon"></td>
<td><a href="https://pythonbuch.com/">Einführung ins Programmieren mit Python</a></td>
<td>Auf Deutsch</td>
<td><a href="pythonbuch.com">pythonbuch.com</a></td>
</tr>
<tr>
<td><img src="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/general/icons/article.png" class="resicon"></td>
<td><a href="https://docs.python.org/3.7/tutorial/index.html">The Python 3.7 Tutorial</a></td>
<td>Einstieg in Python</td>
<td><a href="https://docs.python.org/3.7/">Offizielle Python 3.7 Documentation</a></td>
</tr>
<tr>
<td><img src="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/general/icons/video.png" class="resicon"> 111min</td>
<td><a href="https://youtu.be/H1elmMBnykA">Python Tutorial 2020</a></td>
<td>Einführung in alle wichtigen Python Funktionalitäten (Blender unabhängig)</td>
<td><a href="https://www.youtube.com/channel/UCwRXb5dUK4cvsHbx-rGzSgw">YouTube - Derek Banas</a></td>
</tr>
</tbody>
</table>


			<aside class="copyright" role="note">
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/chapter11/exercise01_a/" title="Übung 11 - Animation">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Übung 11 - Animation
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/chapter06/exercise01_b/" title="Übung 1 - Basics">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              Übung 1 - Basics
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = '';
      var repo_id  = '';
    
    </script>

    <script src="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

